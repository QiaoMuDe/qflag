// Package types 定义了qflag项目的核心类型和接口
//
// types 包提供了整个项目的基础类型定义, 包括:
//   - 标志类型和接口定义
//   - 命令接口定义
//   - 注册表接口定义
//   - 错误处理类型
//   - 解析器接口
//
// 这些类型和接口构成了整个框架的核心抽象层,
// 为具体的实现提供了统一的规范和契约。
package types

// Parser 解析器接口
//
// Parser 定义了命令行参数解析的标准接口, 提供了不同层次的
// 解析功能, 从简单的参数解析到完整的命令路由执行。
//
// 设计理念:
//   - 分层设计: 提供不同层次的解析功能
//   - 灵活性: 支持仅解析、解析+路由等多种使用模式
//   - 可扩展性: 接口设计允许不同的解析策略实现
//
// 使用场景:
//   - 命令行工具的参数解析
//   - 子命令系统的路由管理
//   - 配置管理和参数验证
type Parser interface {
	// ParseOnly 解析当前命令的参数, 不递归解析子命令
	//
	// 参数:
	//   - cmd: 要解析的命令
	//   - args: 命令行参数列表
	//
	// 返回值:
	//   - error: 解析失败时返回错误
	//
	// 功能说明:
	//   - 仅解析当前命令的标志和参数
	//   - 不处理子命令的解析
	//   - 适用于需要手动控制子命令处理的场景
	//
	// 使用场景:
	//   - 多阶段解析
	//   - 自定义子命令处理逻辑
	//   - 参数预处理和验证
	ParseOnly(cmd Command, args []string) error

	// Parse 单纯解析, 递归解析子命令
	//
	// 参数:
	//   - cmd: 要解析的根命令
	//   - args: 命令行参数列表
	//
	// 返回值:
	//   - error: 解析失败时返回错误
	//
	// 功能说明:
	//   - 解析根命令的标志和参数
	//   - 递归解析所有子命令
	//   - 构建完整的命令树结构
	//   - 不执行任何命令的运行函数
	//
	// 使用场景:
	//   - 命令结构验证
	//   - 帮助信息生成
	//   - 配置预检查
	Parse(cmd Command, args []string) error

	// ParseAndRoute 解析并且路由执行
	//
	// 参数:
	//   - cmd: 要解析和执行的根命令
	//   - args: 命令行参数列表
	//
	// 返回值:
	//   - error: 解析或执行失败时返回错误
	//
	// 功能说明:
	//   - 解析根命令和所有子命令
	//   - 根据参数路由到相应的命令
	//   - 执行最终目标命令的运行函数
	//   - 提供完整的命令行处理流程
	//
	// 执行流程:
	//   1. 解析根命令的标志和参数
	//   2. 识别并解析子命令
	//   3. 递归处理直到找到最终命令
	//   4. 执行最终命令的Run函数
	//
	// 使用场景:
	//   - 标准命令行应用
	//   - CLI工具的主入口
	//   - 自动化脚本执行
	ParseAndRoute(cmd Command, args []string) error
}
